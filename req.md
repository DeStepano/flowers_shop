## БД - Требования к проекту - 2024 ВШЭ

### Основные правила:

- Проект можно выполнять группой до 4 человек.
- Дедлайны по заданиям:
  - по заданиям 1 – 2c: **29 ноября 2023**;
  - по остальным заданиям: **13 декабря 2024**.
- Максимальный балл за работу ставится при условии своевременного и верного выполнения всех заданий.
- Если студент не приступил к сдаче задания к дедлайну, баллы за него автоматически обнуляются, а задание считается непринятым.
- Если студент приступил к сдаче задания до дедлайна, но прислал нерелевантную информацию, задание оценивается в 0 баллов.
- Проект выполняется итеративно: нельзя приступать к следующему заданию, пока предыдущее не принято семинаристом.
- В конце семестра проводится защита проекта.


### Задания:

#### 1. Выбор предметной области
- Согласовать предметную область с семинаристом.
- 6–7 сущностей, минимум одна из них – факт, остальные – измерения.

#### 2. Проектирование БД:
- Концептуальная модель:
  - Указание связей в нотации «воронья лапка».
  - 4–6 сущностей.
- Логическая модель:
  - Таблицы, атрибуты, связи в нотации «воронья лапка».
  - БД должна быть во 2НФ или 3НФ.
  - Одна таблица должна быть версионной (SCD2 или SCD4).
- Физическая модель:
  - Таблицы для каждого объекта из логической модели.
  - Пример формата:
    ```
    GOODS Товары

    PK/FK | Название      | Описание              | Тип данных | Ограничение
    ------|---------------|-----------------------|------------|------------
    PK    | GOOD_ID       | Идентификатор товара | INTEGER    | NOT NULL
          | EXTRA_DESC    | Доп. описание товара | TEXT       | 
    ```

#### 3. Подготовка DDL-скриптов:
- Создать БД в PostgreSQL.
- Добавить **10–15 CONSTRAINT**.
- Таблицы должны быть в отдельной схеме.

#### 4. Заполнение данных:
- Вставить **5–10 записей** в каждую таблицу.
- Использовать `INSERT` или загрузить из внешних источников (XLS, CSV).

#### 5. Написание CRUD-запросов:
- Написать `INSERT`, `SELECT`, `UPDATE`, `DELETE` для двух таблиц.

#### 6. Формулировка смысловых запросов:
- 5 запросов на SQL, содержащих:
  - `GROUP BY + HAVING`.
  - `ORDER BY`.
  - оконные функции.
- Пример:
  > "В результате выполнения запроса будут получены суммарные остатки товаров."

#### 7. Создание представлений:
- Одно представление на таблицу.
- Маскирование персональных данных.
- Пример маскирования: `4276********0000`.

#### 8. Создание сложных представлений:
- Три сложных представления (объединение нескольких таблиц).

#### 9. Создание триггеров:
- 2 триггера (логика согласовывается с семинаристом).

#### 10. Создание хранимых процедур:
- 2 процедуры (логика согласовывается с семинаристом).

#### 11. Подключение через ORM (опционально):
- Выполнение CRUD и аналитических запросов через Python.

#### 12. Публикация результатов:
- Выложить на Github/Gitlab.

#### 13. Защита проекта:
- Быть готовым написать запросы и ответить на теоретические вопросы.

---

### Вес заданий:
| Задание  | Макс. балл | Детализация | Комментарии                      |
|----------|------------|-------------|----------------------------------|
| 1        | 0          | -           | Согласовать с семинаристом.     |
| 2        | 0          | -           | Без согласования проект = 0.    |
| 3        | 1          | Без CONSTRAINT = 0.5. | Быть готовым объяснить DDL. |
| 4        | 1          | 0.15 за таблицу | Показать, как заполнить БД.    |
| 5        | 0.5        | ~0.0675 за запрос | Написать новые CRUD-запросы. |
| 6        | 2.5        | 0.1 за простые SELECT, 0.5 за оконные функции. | Запросы должны выдавать ожидаемый результат. |
| 7        | 1          | 0.2 за представление с маскированием. | Логика согласовывается. |
| 8        | 1          | ~0.33 за представление. | Описание обязательно.     |
| 9        | 1.5        | ~0.75 за триггер. | Логика триггеров согласуется. |
| 10       | 1.5        | ~0.75 за процедуру. | Логика процедур согласуется. |
| 11       | 2          | -           | Обсудить с семинаристом.        |
"""
